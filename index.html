<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>樂樂的個人網站</title>
    <link rel="icon" type="image/png" href="images/icon2.png">
</head>
<body>

    <nav>
        <h2>鄒卓樂</h2> 
        <ul>
            <li><a href="#about">關於我</a></li>
            <li><a href="#gallery">相簿</a></li>
            <li><a href="#contact">聯絡我</a></li>
        </ul>
    </nav>

    <header id="hero">
        <video autoplay muted loop playsinline class="bg-video" poster="images/hero.jpg">
            <source src="images/jump.mp4" type="video/mp4">
            您的瀏覽器不支援影片標籤。
        </video>

        <div class="hero-content">
            <h1>早晨，我係你老豆</h1>
            <p>往下滑動探索</p>
        </div>
    </header>

    <section id="about">
        <div class="about-container">
            <div class="about-image">
                <video muted loop playsinline class="smart-video" poster="images/profile.jpg"> 
                    <source src="images/profile.mp4" type="video/mp4">
                </video>
            </div>

            <div class="about-text">
                <h3>關於我</h3>
                <p>早晨，我叫鄒卓樂，今年21歲還是A0，地獄火俱樂部成員</p>
                <p>正就讀我的英雄學院A班</p>
                <p>個性：行走避孕套</p>
                <p>英雄名: 大・魔・法・神Arcanmight</p>
            </div>
        </div>
    </section>

    <section id="gallery">
        <h3>相簿</h3>
        <div class="gallery-grid">
            <img src="images/p1.jpg" alt="作品1">
            <img src="images/p2.HEIC" alt="作品2">
            
            <video muted loop playsinline class="smart-video" poster="images/p3.jpg">
                <source src="images/p3.mp4" type="video/mp4">
            </video>
            
            <img src="images/p4.JPG" alt="作品4">
            <img src="images/p5.jpg" alt="作品5">
            
            <video muted loop playsinline class="smart-video" poster="images/p6.jpg">
                <source src="images/p6.mp4" type="video/mp4">
            </video>
        </div>
    </section>

    <footer id="contact">
        <h3>聯絡我</h3>
        <p>Jacky05@Jacky05.win</p>
        <p>© 2025 Jacky05</p>
    </footer>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            
            /* 1. Hero 影片喚醒機制 (修復滑回去不播放的問題) */
            const heroVideo = document.querySelector('.bg-video');
            if (heroVideo) {
                const heroObserver = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.play().catch(e => console.log("Hero autoplay handled"));
                        } else {
                            entry.target.pause();
                        }
                    });
                });
                heroObserver.observe(heroVideo);
            }

            /* 2. 手機與電腦的互動邏輯 */
            const isMobile = window.innerWidth < 768;
            // 抓取所有需要特效的目標 (Gallery 圖片 + 所有 Smart Video)
            const allTargets = document.querySelectorAll('.smart-video, .gallery-grid img');

            if (isMobile) {
                // --- 手機版：捲動觸發特效 (Scroll Trigger) ---
                const observerOptions = {
                    root: null,
                    rootMargin: '0px',
                    threshold: 0.3 // 只要進入畫面 30% 就觸發，體驗比較流暢
                };

                const contentObserver = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        const target = entry.target;
                        
                        if (entry.isIntersecting) {
                            // A. 進入視線 -> 加上 .in-view (變彩色+放大)
                            target.classList.add('in-view');
                            
                            // 如果是影片，播放
                            if (target.tagName === 'VIDEO') {
                                target.play().catch(e => console.log("Autoplay prevented"));
                            }
                        } else {
                            // B. 離開視線 -> 移除 .in-view (變回黑白)
                            target.classList.remove('in-view');
                            
                            // 如果是影片，暫停
                            if (target.tagName === 'VIDEO') {
                                target.pause();
                            }
                        }
                    });
                }, observerOptions);

                // 開始監視
                allTargets.forEach(target => {
                    contentObserver.observe(target);
                });

            } else {
                // --- 電腦版：滑鼠互動 (Hover) ---
                // 電腦版只處理影片播放，圖片縮放交給 CSS hover 處理
                document.querySelectorAll('.smart-video').forEach(video => {
                    video.addEventListener('mouseenter', () => video.play());
                    video.addEventListener('mouseleave', () => video.pause());
                });
            }

            /* 3. Hero 捲動淡出效果 */
            const heroSection = document.getElementById('hero');
            if(heroSection){
                window.addEventListener('scroll', function() {
                    const scrollPosition = window.scrollY;
                    const heroHeight = heroSection.offsetHeight;
                    let opacityValue = 1 - (scrollPosition / heroHeight);
                    if (opacityValue < 0) opacityValue = 0;
                    heroSection.style.opacity = opacityValue;
                });
            }
        });
    </script>
</body>
</html>